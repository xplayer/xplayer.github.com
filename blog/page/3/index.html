
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>XPlayer</title>
  <meta name="author" content="Pietro Di Bello">

  
  <meta name="description" content="Mi e&#8217; piaciuta molto questa frase di Kent Beck da una mail sulla lista xp americana, sull&#8217;uso del numero di linee di codice come metrica &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://xplayer.github.com/blog/page/3/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="XPlayer" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38377452-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">XPlayer</a></h1>
  
    <h2>A blog on my daily efforts to be a better developer, and keep improving every day.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:xplayer.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/17/measuring-lines-of-code/">Measuring Lines of Code</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-17T00:00:00+01:00" pubdate data-updated="true">Jan 17<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content">Mi e&#8217; piaciuta molto questa frase di Kent Beck da una mail <a href="http://tech.groups.yahoo.com/group/extremeprogramming/message/137842">sulla lista xp americana</a>, sull&#8217;uso del numero di linee di codice come metrica di produttivita&#8217;:
<blockquote><i>Lines of code has many limitations &#8211; it&#8217;s like measuring a factory based on its consumption of raw materials not on its output.</i></blockquote>
Ricorda un po&#8217; <a href="http://www.cs.utexas.edu/~EWD/transcriptions/EWD08xx/EWD854.html">quella </a>di Edsger W.Dijkstra
<blockquote><i>Yet people talk about programming as if it were a production process and measure &#8220;programmer productivity&#8221; in terms of &#8220;number of lines of code produced&#8221;. In so doing they book that number on the wrong side of the ledger: we should always refer to &#8220;the number of lines of code spent&#8221;.</i></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/11/26/microsoft-e-il-continuous-improvement/">Microsoft E Il Continuous Improvement</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-26T00:00:00+01:00" pubdate data-updated="true">Nov 26<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content">Su InfoQ <a href="http://www.infoq.com/news/2007/11/criticism-from-microsoft-devlead">si parla</a> di tal Jay Bazuzi, &#8221;<span style="font-style:italic;">Development Lead for the C# Editor</span>&#8221;, che lascia Microsoft e che in occasione di questo &#8220;evento&#8221;, ha postato sul suo blog delle<a href="http://blogs.msdn.com/jaybaz_ms/archive/2007/11/09/parting-words-for-dear-friends.aspx"> riflessioni su alcuni punti deboli nello sviluppo del sw in Microsoft</a>.

<img src="http://farm1.static.flickr.com/68/204873356_bdd9d84cb4.jpg" alt="sunset in val di casies" height="375" width="500" />
A parte le osservazioni su come in Microsoft si usa l&#8217;OO o si applica refactoring, l&#8217;ultimo punto e&#8217; particolarmente interessante, quando parla di &#8220;doing better&#8221;.

Le domande che Jay raccomanda di farsi per migliorare (e che lui personalmente si faceva e faceva al suo team) sono
<ul>
	<li><em>“How can I make sure this problem goes away forever?”</em></li>
	<li><em>“How can I produce fewer bugs?”</em></li>
	<li><em>“How can I make it easier to fix the bugs I have?”</em></li>
	<li><em>“How can I make it easier to respond to change quickly?”</em></li>
	<li><em>“How can I make it easier to make my software fast enough?”</em></li>
</ul>
Mica paglia!

Che sotto sotto Jay volesse rendere piu&#8217; agile Microsoft? :-)
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/11/26/il-mio-feedback-sullagile-day-2007/">Il Mio Feedback Sull&#8217;agile Day 2007</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-26T00:00:00+01:00" pubdate data-updated="true">Nov 26<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content">Complimenti a Marco e agli altri organizzatori, l&#8217;agile day 2007 e&#8217; stato molto interessante, con contenuti ed organizzazione migliori dello <a href="http://xplayer.wordpress.com/2006/12/04/il-mio-feedback-sullagile-day-2006-milano-011206/">scorso anno</a>.

Cosa mi e&#8217; piaciuto:
<ul>
	<li>lo speak di Tim Mackinnon, uno dei padri dei mock objects. In particolare:
<ul>
	<li>l&#8217;accento sull&#8217;appreciative inquiry e sul positive thinking</li>
	<li>le pratiche da lui adottate, in particolare quelle a supporto della riflessivita&#8217; e del miglioramento continuo del team, come la timeline e la retrospective</li>
</ul>
</li>
	<li>l&#8217;esperienza di <a href="http://blog.java2me.org/antonio-terreno-home-page/">Antonio Terreno</a> su un progetto in ThoughtWorks dove c&#8217;era stato un cambio totale di team, e si e&#8217; riusciti a fare bene</li>
	<li>le incursioni di Francesco Cirillo, vedi la <a href="http://www.metodiagili.it/campagna-anti-if.html">campagna anti-if </a> (comprate la maglietta anti-if!) e le riflessioni su cosa voglia dire essere agili e su quali passi dovrebbe intraprendere la comunita&#8217; xp italiana per favorire la diffusione dei metodi agili.</li>
	<li>la presentazione di Alessandro Ruzzon sull&#8217;uso di Spring in progetti &#8220;agili&#8221; (!!)</li>
	<li>in generale ho apprezzato la logistica a supporto delle presentazioni, vero punto debole dell&#8217;agile day 2006 (troppo rumore perche&#8217; non c&#8217;era una vera separazione delle diverse track &#8220;concorrenti&#8221;)</li>
</ul>
Cosa non mi e&#8217; piaciuto:
<ul>
	<li>la location (troppo difficile da raggiungere)</li>
</ul>

Ah, e ovviamente, aderite anche voi alla campagna anti-if! <a href="http://www.metodiagili.it/campagna-anti-if.html"> <img src="http://www.metodiagili.it/images/aderisci-anti-if-1.gif" alt="Campagna Anti-IF" border="0" height="60" width="120" /></a>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/11/19/la-mia-piccola-illuminazione-di-oggi-gantt-planning-vs-xp-planning/">La Mia Piccola Illuminazione Di Oggi: GANTT Planning vs XP Planning</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-19T00:00:00+01:00" pubdate data-updated="true">Nov 19<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content">La mia piccola illuminazione di oggi riguarda il modo tradizionale di pianificare e gestire un progetto software, ovvero con un bel <a href="http://en.wikipedia.org/wiki/Gantt_chart">GANTT</a> e MS Project.

Per la prima volta ho dovuto analizzare il GANTT per la nuova release di un progetto su cui sto lavorando, e rivedere alcune attivita&#8217; a nostro carico per capire se mancava qualcosa e verificare le dipendenze e le stime. Ci mancherebbe, se c&#8217;e&#8217; da fare, si fa&#8217;, ma ho sentito pian piano sorgere un senso di frustrazione&#8230;
Ho poi capito il senso di fastidio che provavo: il GANTT (almeno, questo GANTT) e&#8217; piuttosto &#8220;tecnical-task centrico&#8221;, ovvero organizza le attivita&#8217; &#8220;tecniche&#8221;, ma non considera in nessun modo le features dal punto di vista del customer.

Tutto il contrario della pianificazione in XP, che e&#8217; &#8220;business-value centrica&#8221;, ovvero usa le user stories (&#8220;units of customer-visible functionality&#8221;) per pianificare pezzi di funzionalita&#8217;, a prescindere poi dai task tecnici che possono esserci dietro (e che vanno certo esplicitati, se e&#8217; il caso, ma che non hanno valore di business di per se&#8217;).

Ma perche&#8217; questa differenza?

Forse questo e&#8217; dovuto al fatto che, mentre il GANTT e&#8217; uno strumento <u>del project manager</u> per guidare il team di sviluppo (il customer lo vedra&#8217; mai?), le user stories sono invece uno strumento <u>del customer</u> per guidare lo stesso team.
In altre parole la pianificazione in XP coinvolge in prima persona il team dei customers (project manager, product manager, marketing, utenti, &#8230;), mentre in un progetto tradizionale la dinamica e&#8217; del tipo &#8220;eccoti le specifiche, ci si rivede a fine progetto&#8221;.

Sta di fatto che io, abituato a ragionare innanziutto per user stories, mi sono ritrovato piuttosto a disagio a ragionare per task tecnici, perche&#8217; facevo fatica a vederci dietro le funzionalita&#8217;, e  spesso anzi trovavo che la somma dei task tecnici non bastava a coprire la funzionalita&#8217; che il sistema dovrebbe realizzare.

E&#8217; un po&#8217; come descrivere un quadro attraverso la somma dei tratti del pennello che lo compongono&#8230; si rischia di perdere il senso complessivo dell&#8217;opera.
Il rischio nel caso del software e&#8217; quello perdere tra i tanti task tecnici i veri obbiettivi di una feature, ovvero produrre qualcosa che risponde a delle necessita&#8217; del customer.
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/11/16/come-object-mentor-guida-la-transizione-xp-dai-propri-clienti/">Come Object Mentor Guida La Transizione XP Dai Propri Clienti</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-16T00:00:00+01:00" pubdate data-updated="true">Nov 16<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content">Di recente <a href="http://blog.objectmentor.com/articles/category/young-bobs-rants">Bob Koss</a> di Object Mentor ha pubblicato un post sul <a href="http://blog.objectmentor.com/articles/2007/11/15/velocity-inflation-triggers-productivity-recession" title="Velocity Inflation Triggers Productivity Recession">possibile cattivo uso della velocity come metrica di processo</a>.

A parte il tema del post, Bob parla anche di come tipicamente Object Mentor guida la transiziona ad XP dai loro clienti.  Prima di tutto tengono un corso su XP per tutti (gruppo di programmatori e gruppo di customers).
<blockquote><em>When Object Mentor does an XP transition with a client, we start with our XP Immersion course to get everybody on the same page about what our goals are.</em></blockquote>
Poi due istruttori seguono separatamente i due gruppi, uno insegna ai programmatori le pratiche piu&#8217; tecniche, l&#8217;altro invece affronta con i customers le pratiche di planning e managing del progetto XP (scrivere le carte, le iterazioni, la pianificazione incrementale, &#8230;)
<blockquote><em>Ideally, we use two instructors, one to train the programmers in topics such as Test Driven Development and Refactoring, and the other coach teaches story writing, iteration planning, and release planning to the customer team. </em></blockquote>
Poi i due gruppi lavorano assieme per un giorno intero ad un progetto di prova, per far vedere a tutti come funziona il processo XP
<blockquote><em>We then bring the two groups together for a day and have the customer team drive the programming team on a classroom exercise so everybody can experience how the process works.</em></blockquote>
I due mentor  rimangono poi per seguire le prime iterazioni del progetto &#8220;vero&#8221;
<blockquote><em>The instructors then stay and work with the team for a few iterations, coaching them on how to use what they learned in class on their own project.</em></blockquote>
E poi tornano di tanto in tanto per vedere come vanno le cose, magari partecipano alle retrospective di iterazione per vedere quali sono i problemi, come vanno le metriche (in questo caso la velocity).

Interessante, no?

Quanto meno perche&#8217; mi fa riflettere su quali siano i modi migliori per introdurre XP in una realta&#8217; nuova. Certo, qui c&#8217;e&#8217; un cliente che coscentemente decide di adottare XP e paga (tanto immagino) per essere guidato nella transizione verso un processo agile.

La realta&#8217; in cui invece mi trovo io e&#8217; diversa, si deve procedere in modo incrementale, a piccoli passi, perche&#8217; qui nessuno (tra i dirigenti almeno) ha chiesto di adottare XP, anche se c&#8217;e&#8217; molto interesse e (qualche) consapevolezza dei punti deboli dell&#8217;attuale processo. C&#8217;e&#8217; quindi un lavoro doppio, dal basso verso i programmatori e dall&#8217;altro verso i manager, per far vedere i piccoli miglioramenti che si possono ottenere lavorando in modo agile. Miglioramenti che consentono di lavorare in modo piu&#8217; divertente e soddisfacente (il famoso <a href="http://video.google.com/videoplay?docid=7830246530742207581" title="google video">&#8220;ease at work&#8221;</a> di cui parlava Kent Beck in una sua presentazione tempo fa&#8217;).

Vabbe&#8217; magari ne parlero&#8217; in un altro post, visto che sto andando fuori tema!

Alla prossima!
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/10/24/come-usare-luml/">Come Usare l&#8217;UML?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-10-24T00:00:00+02:00" pubdate data-updated="true">Oct 24<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"> Recentemente mi e&#8217; stato chiesto come si  sposano XP e l&#8217;utilizzo del UML, ovvero se e&#8217; molto usato il design delle classi in UML prima di implementarle.

Per mia esperienza, l&#8217;UML puo&#8217; essere utile come strumento di comunicazione nel team, per trasmettere una idea di design, per esplorare la struttura statica e dinamica degli oggetti di un sistema. Una volta ottenuto il risultato (comunicare l&#8217;idea, chiarirsi le idee, mettere a fuoco una issue), si butta via il diagramma.

Non fraintendetemi pero&#8217;.

Una delle prime cose che ho studiato quando sono entrato nel <a href="http://www.quinary.it/pagine/about/extreme_frame.htm">team Xplayers di Quinary</a> e&#8217; proprio la notazione UML. In particolare sono magistrali alcuni capitoli del libro di Larman “Applying UML and Patterns” e alcuni articoli di Bob Martin (per esempio <a href="http://www.objectmentor.com/resources/articles/umlCollaborationDiagrams.pdf">questo</a>). Questo per dire che un bravo xper deve conoscere bene l&#8217;UML perche&#8217; deve saperlo leggere e scrivere (in particolare come dicevo i class diagram, i collaboration diagram e i sequence diagram), cosi&#8217; come deve conoscere mooolto bene i pattern, perche&#8217; deve saperli riconoscere quando emergono dal design del codice in evoluzione (stessa cosa vale per i principi dell&#8217;OO).

Uno degli usi migliori per mia esperienza della notazione UML e&#8217; per esplorare un sistema legacy, ovvero per capire che tipo di legami e di dinamiche ci sono dietro al sistema, magari disegnando qualche class diagram e/o collaboration diagram. E&#8217; quindi molto utile per avere una visione di insieme, seppure molto limitata, di un sistema. Anche qui si disegna il diagramma, e poi, appena diventa inutile (si spera presto), lo si butta via.
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/05/30/perche-non-si-dovrebbero-mockizzare-classi-concrete/">Perche&#8217; Non Si Dovrebbero Mockizzare Classi Concrete</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-05-30T00:00:00+02:00" pubdate data-updated="true">May 30<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content">Mi sono sempre chiesto perche&#8217; mai Steve Freeman e gli altri &#8216;padri&#8217; dei Mock Objects e dello stile di testing interaction-based sconsigliassero di fare mock di classi concrete, tanto che <em>jMock </em>ed <em>EasyMock </em>non supportavano questa possibilita&#8217; &#8216;nativamente&#8217;, ma si doveva installare un&#8217;estensione a parte, che usa la famosa libreria <em>CGLIB </em>(per inciso con il nuovo jMock 2 e&#8217; possibile fare mock di classi concrete, ma si deve usare la classe UnsafeHackConcreteClassImposteriser, ed il nome dice tutto di come scoraggino questa pratica).

Tanto che tempo fa avevo anche commentato un <a href="http://www.mockobjects.com/2006/10/jmock-listening-to-opinionated.html#comments" title="Commento al post di Freeman">post di Freeman</a> chiedendogli perche&#8217; lui giudicasse il mock di classi concrete come una sorta di ultima possibilita&#8217; da adottare solo in casi di emergenza (es quando si affronta codice legacy particolarmente ostico e <em>chiuso</em>). E lui mi aveva risposto cosi&#8217;:
<blockquote><font color="#000000"><em>Because then the interface is implicit, which means you can&#8217;t see it and you haven&#8217;t given it a name. Instead of using the test to expose a feature of the design, you have more to think about whenever you&#8217;re working in that area: is the method overwritten? is it in a super class? what about the state of the rest of the class I&#8217;m extending? That sort of thing.</em></font>

<font color="#000000"><em>For me, the CGLIB should have a &#8220;Break Glass in Case of Emergency&#8221; written on the front. It&#8217;s useful in tight situations, but not to be recommended.</em></font></blockquote>
Eppero&#8217; nonostante la sua risposta la cosa non mi era ancora chiara fino in fondo.
Poi un recente post su mockobjects.com (<a href="http://www.mockobjects.com/2007/04/test-smell-mocking-concrete-classes.html"><strong>Test Smell: Mocking concrete classes</strong></a>) mi ha finalmente aiutato a capire meglio le cose.

Il fatto e&#8217; che lo scopo del TDD con i Mock Objects e&#8217; quello di scoprire e far emergere relazioni tra oggetti, e dare nomi a queste relazioni. Se pero&#8217; si mantiene la relazione tra oggetti a livello di classi concrete, queste relazioni rimangono per cosi&#8217; dire piu&#8217; nascoste, implicite, e quindi diventa difficile individuarle e darle un nome.

Cito direttamente il post, laddove spiega cosa non va con i mock di classi concrete:
<blockquote><font color="#000000"><em>The problem with this approach is that it leaves the relationship between the objects implicit.
I hope we&#8217;ve made clear by now that <strong>the intention of Test-Driven Development with Mock Objects is to discover relationships between objects</strong>.
If I subclass, there&#8217;s nothing in the domain code to make such a relationship visible, just methods on an object. This makes it harder to see if the service that supports this relationship might be relevant elsewhere and I&#8217;ll have to do the analysis again next time I work with the class.</em></font></blockquote>
<img src="//dictionarytip/skin/book.png" style="border:1px solid blue;z-index:90;position:absolute;left:505px;top:293px;" />

Addirittura si spinge a dire che lasciando le relazioni tra oggetti a livello di classi concrete, si rischia di violare l&#8217;<a href="http://www.objectmentor.com/resources/articles/isp.pdf">Interface Segregation Principle</a>, perche&#8217; le classi dipendono da una interfaccia piu&#8217; grande di quella che usano veramente.

E poi poco piu&#8217; avanti spiega che l&#8217;approccio <em>mockist</em> aiuta anche a dare nomi alle relazioni ed ai ruoli, e a ragionare piu&#8217; in termini di dominio piuttosto che di implementazione:
<blockquote><font color="#000000"><em>There&#8217;s a more subtle but powerful reason for not mocking concrete classes.
As part of the TDD with Mocks process, I have to think up names for the relationships I discover—in this example the <code>ScheduledDevice</code>. I find that this makes me think harder about the domain and teases out concepts that I might otherwise miss.
Once something has a name, I can talk about it. </em></font></blockquote>
Il tutto e&#8217; poi riassunto bene nell&#8217;altro post, <a href="http://www.mockobjects.com/2007/05/what-tests-will-tell-you.html">What the tests will tell you</a>, da leggere e rileggere, dove elenca alcuni benefici derivanti dall&#8217;approccio TDD+MockObjects
<ul>
	<li><em>Keeping knowledge local</em></li>
	<li><em>If it&#8217;s explicit I can name it</em></li>
	<li><em>More names mean more domain information</em></li>
	<li><em>Pass behaviour rather than data</em></li>
</ul>
Detto questo, ammetto che sono sempre stato affascinato da questo approccio ma non ho mai trovato la forza necessaria per decidere di applicarlo un po&#8217; piu&#8217; sistematicamente, metterlo alla prova insomma.

Un po&#8217; perche&#8217; nel mio team da sempre si usa l&#8217;approccio classico, e l&#8217;approccio interaction-based e&#8217; visto con qualche dubbio/sospetto, un po&#8217; perche&#8217; i nostri progetti per ora sono tutti Java 1.4 e quindi buona parte delle comodita&#8217; delle versioni piu&#8217; recenti dei framework jMock e Easymock te le perdi (soprattutto la loro maggiore <em>letteralita&#8217;</em>, cosa importante per avere dei test validi).
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/05/15/ascoltare-i-propri-test-quando-la-lunghezza-di-un-costruttore-ci-puo-insegnare-tanto/">Ascoltare I Propri Test: Quando La Lunghezza Di Un Costruttore Ci Puo&#8217; Insegnare Tanto&#8230;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-05-15T00:00:00+02:00" pubdate data-updated="true">May 15<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content">Ancora una volta i post su mockobjects.com mi ricordano che c&#8217;e&#8217; molto da imparare dai propri test. E&#8217; il caso di <a href="http://www.mockobjects.com/2007/04/test-smell-bloated-constructor.html">Test Smell: Bloated Constructor</a> e <a href="http://www.mockobjects.com/2007/04/test-smell-everything-is-mocked.html">Test Smell: Everything is mocked.</a>

<a href="http://xplayer.files.wordpress.com/2007/05/dscf1963.jpg" title="Bloated Constructor…"><img src="http://xplayer.files.wordpress.com/2007/05/dscf1963.thumbnail.jpg" alt="Bloated Constructor…" align="middle" /></a>

Se si usa il TDD, capita di finire per avere oggetti con un costruttore gigante, che prende una lista infinita di parametri, tipicamente i peers (ovvero i collaboratori) dell&#8217;oggetto. In tali casi fare i test, e soprattutto farli coi mock, e&#8217; la morte. E in molti casi ce la si prende coi mock, rei di complicare i test.

Ma spesso la difficolta&#8217; a testare un oggetto e&#8217; sintomo di problemi di design sull&#8217;oggetto stesso&#8230;  E riflettere su queste difficolta&#8217; e riportarle sul codice sotto test ci consente di migliorarne il design. O, come dice Steve Freeman, <em>being sensitive to complexity in the tests can help me clarify my designs.</em>

In questo caso un costruttore lungo potrebbe indicare che magari ci sono oggetti che potrebbero essere raggruppati a formare un nuovo oggetto. Questo semplifica anche i test dell&#8217;oggetto da cui siamo partiti e consente di ridurre le sue responsabilita&#8217;, tutte cose buone e giuste.

Freeman usa due euristiche per l&#8217;estrazione di componenti:
<blockquote><em>When I&#8217;m extracting implicit components, I look first for two conditions: arguments that are always used together in the class, and that have the same lifetime. That usually finds me the concept, then I have the harder task of finding a good name.</em></blockquote>
Nel secondo post che cito all&#8217;inizio, <a href="http://www.mockobjects.com/2007/04/test-smell-everything-is-mocked.html">Test Smell: Everything is mocked</a>, si sfata un mito duro a morire: non si devono fare mock per tutte le classi che si incontrano.

In particolare non e&#8217; assolutamente necessario mockizzare value objects, e soprattutto &#8220;don&#8217;t mock third-party libraries!&#8221;. Piuttosto, un approccio migliore e&#8217; quello di far emergere col TDD e i mock un sottile straterello di codice che faccia da adaptor verso le API esterne, e che fornisca al nostro dominio i servizi di cui ha bisogno.

<img src="http://www.mockobjects.com/uploaded_images/mockable-adaptor-752684.png" height="192" width="256" />

E poi testare questo thin layer con dei test di integrazione che garantiscano che ci si agganci correttamente alla libreria.
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/04/26/ascoltare-i-propri-test-ovvero-migliorare-il-codice-partendo-dagli-smell-dei-propri-test/">Ascoltare I Propri Test, Ovvero Migliorare Il Codice Partendo Dagli Smell Dei Propri Test</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-04-26T00:00:00+02:00" pubdate data-updated="true">Apr 26<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content">Steve Freeman e Nat Pryce hanno iniziato una serie di interessanti post sul loro blog <a href="http://www.mockobjects.com">mockobjects </a>sul tema dei <a href="http://www.mockobjects.com/labels/listening%20to%20the%20tests.html">Test Smells,</a>  ovvero su come &#8216;ascoltare&#8217; i propri test per scoprire possibilita&#8217; di miglioramento nel design del codice sotto test
<blockquote><em>    In our experience, when we find that our tests are awkward to write, it&#8217;s usually because the design of our target code can be improved.</em></blockquote>
Una cosa su cui mi trovo d&#8217;accordo, piu&#8217; che altro perche&#8217; ho avuto la stessa esperienza in passato (e anche nel presente!)

<a href="http://xplayer.files.wordpress.com/2007/05/strip_paoladibello.jpg" title="Test Smells…"><img src="http://xplayer.files.wordpress.com/2007/05/strip_paoladibello.jpg" alt="Test Smells…" height="283" width="1278" /></a>

Il primo post della serie e&#8217;  <a href="http://www.mockobjects.com/2007/04/test-smell-i-need-to-mock-object-i-cant.html">Test Smell: I need to mock an object I can&#8217;t replace (without magic)</a>,  dove si parte da un codice piuttosto &#8216;chiuso&#8217;, con dipendenze nascoste (magari usando dei Singleton), e passo passo lo si rifattorizza, aprendolo, prima introducendo un fake (o stub che dir si voglia) e poi passando ai mock, mostrando come il codice migliori, prima esplicitando le dipendenze e poi assegnando meglio le responsabilita&#8217;.

Se vi capita dategli un&#8217;occhiata!
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/12/11/law-of-demeter/">Law of Demeter</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-12-11T00:00:00+01:00" pubdate data-updated="true">Dec 11<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content">Di recente ho seguito un thread intitolato <a href="http://tech.groups.yahoo.com/group/extremeprogramming/messages/122627?threaded=1&amp;m=e&amp;var=1&amp;tidx=1" title="link al thread">&#8220;The Law of Demeter and Testability&#8221;</a> sulla lista xp americana.

A partire dal primo post di <a href="http://www.jayflowers.com/WordPress/">Jay Flowers</a> (niente di travolgente), il discorso si e&#8217; poi spostato sulla legge di demeter di per se&#8217;, il cui &#8216;peso&#8217; personalmente non ho mai capito fino in fondo. Ne&#8217; tantomeno mi sembra che se ne parli molto, al contrario magari di altri principi piu&#8217; noti come OCP, DIP, LSP, SRP, eccetera.

Alcuni messaggi di questo thread mi hanno fatto capire meglio questo &#8216;principio&#8217; (chiamarla legge fa un po&#8217; ridere) e a vederlo in un&#8217;ottica diversa.

Vi sottopongo gli spunti piu&#8217; interessanti, sperando possano esservi di stimolo quanto lo sono stati per me

Michael Feathers:
<blockquote><em> It&#8217;s a great article, but the thing to remember about LoD is that it is not iron-clad. There are cases where you&#8217;re better off not having demetered code. The classic example is the Excel Object model. You get the workbook from the application and the worksheet from the workbook, and drill down through ranges to cells. It works because the model is very stable. </em>

<em>In general, when the structure of data has meaning, LoD gets in the way; when you care more about behavior (and usually you can), LoD is the way to go. </em></blockquote>
Ron Jeffries:
<blockquote><em> Yes &#8230; the observation about structure is a good one. If you think of what you&#8217;d have to do, otherwise, with the Excel model, you&#8217;d have to make each call to Excel, parameterized with workbook name, worksheet name, maybe range, then cell. Pulling the innards out amounts to an addressing prefix, or stepping down through a hierarchy.</em></blockquote>
<blockquote><em>Mostly, though, I&#8217;d say LoD is the way to bet. </em></blockquote>
E infine Brad Appleton:
<blockquote><em>I actually took a class from Dr. Lieberherr on the full Demeter method (of which LoD is one small part). Having had the benefit of that, I think I have a lot of additional insight into the above.
</em></blockquote>
<blockquote><em>The issue with the LoD is that, the way it is usually stated, the assumption is any/every class in an O-O program should be exhibiting functional behavior and hiding the details of what it contains, and how it contain them.</em></blockquote>
<blockquote><em>There are classes whose job is to encapsulate functional behavior/services, and there are classes whose job is to encapsulate structural behavior/services. That is to say that for some classes, the &#8220;secret&#8221; they need to &#8220;hide&#8221; isnt the fact that they contain some kinds of objects, but the details of HOW they contain those objects.
Simple examples of these would be data-structures, lists, collections, iterators, dictionaries, data-stores, etc. Accessing the interfaces of the objects contained by such encapsulated structures actually doesnt violate the principle behind the LoD. But because of the way LoD is stated in such an oversimplified manner, those things appear to be violations when they really arent.</em></blockquote>
<blockquote><em>When a method-call returns a subobject of its containing object, then consider that invocation to be a violation of LOD *only* *if* the containing object is supposed to encapsulate behavior concerning its subobjects. If the object really only needs to encapsulate structural details about HOW it contains that object (rather than WHAT it contains), then it&#8217;s not really a violation of LoD.</em></blockquote>
<blockquote><em>So it&#8217;s less about whather or not the caller cares about the behavior or structure of the data, it more about whather the callee cares about (should be encapsulating) the behavior or the structure of what it contains. </em></blockquote>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/02/12/learning-ruby-reimplementing-it-attr_reader/">Learning Ruby reimplementing it: attr_reader</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/12/attr_writer/">Learning Ruby reimplementing it: attr_writer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/22/a-rails-project-file-for-sublime-text-2/">A Rails project file for Sublime Text 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/08/27/a-review-of-great-bash-video-by-carl-albing-oreilly-media/">A review of &#8220;Great Bash&#8221; video by Carl Albing (O&#8217;Reilly Media)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/03/12/dinamically-add-data-accessor-methods-on-static-rails-data-model/">Dynamically add data accessor methods on &#8220;static&#8221; Rails data model</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/xpepper">@xpepper</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'xpepper',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("pierodibello", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/pierodibello" class="twitter-follow-button" data-show-count="false">Follow @pierodibello</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/pierodibello?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/pierodibello">My Delicious Bookmarks &raquo;</a></p>
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/107869079010805101249?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Pietro Di Bello -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'pierodibello';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
