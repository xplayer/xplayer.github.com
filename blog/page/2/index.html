
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>XPlayer</title>
  <meta name="author" content="Pietro Di Bello">

  
  <meta name="description" content="DeepTest currently won&#8217;t work if you&#8217;ve configured MySQL with no password (in other words, if you are able to connect to mysql with a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://xplayer.github.com/blog/page/2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="XPlayer" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38377452-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">XPlayer</a></h1>
  
    <h2>A blog on my daily efforts to be a better developer, and keep improving every day.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:xplayer.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/18/one-and-a-half-useful-thing-to-know-when-using-deeptest-gem-with-mysql/">One (and a Half) Useful Thing to Know When Using DeepTest Gem With MySQL</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-18T00:00:00+01:00" pubdate data-updated="true">Jan 18<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/01/18/one-and-a-half-useful-thing-to-know-when-using-deeptest-gem-with-mysql/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><a href="http://github.com/qxjit/deep-test">DeepTest</a> currently won&#8217;t work if you&#8217;ve configured MySQL with no password (in other words, if you are able to connect to mysql with a simple &#8220;mysql -u root&#8221;).
To fix this, you have to patch DeepTest (I know, asap I&#8217;ll go through the whole process to propose the patch to the original project leader).
Actually, you have to comment out a line, in the <em>DeepTest:Database:MysqlSetupListener#grant_privileges </em>method:
<pre style="background:#f1f0f0 none repeat scroll 0 0;color:#000000;padding-left:30px;"><span style="color:#806030;">.</span><span style="color:#806030;">.</span><span style="color:#806030;">.</span>
<span style="color:#400000;font-weight:bold;">def</span> grant_privileges<span style="color:#806030;">(</span>connection<span style="color:#806030;">)</span>
sql <span style="color:#806030;">=</span> %<span style="color:#806030;">{</span>grant all on <span style="color:#c34e00;">#{worker_database}.*</span>
to %s@<span style="color:#e60000;">'localhost'</span>;<span style="color:#806030;">}</span> % <span style="color:#806030;">[</span>
connection<span style="color:#806030;">.</span>quote<span style="color:#806030;">(</span>worker_database_config<span style="color:#806030;">[</span>:username<span style="color:#806030;">]</span><span style="color:#806030;">)</span><span style="color:#c34e00;"># ,</span>
<span style="color:#c34e00;"># connection.quote(worker_database_config[:password])  &lt;-- mysql with no password won't work</span>
<span style="color:#806030;">]</span>
connection<span style="color:#806030;">.</span>execute sql
<span style="color:#400000;font-weight:bold;">end</span>
<span style="color:#806030;">.</span><span style="color:#806030;">.</span><span style="color:#806030;">.</span>
</pre>
Another tip (the &#8220;half&#8221; in the blog post title):
Don&#8217;t forget to edit the &#8220;pattern&#8221; option in your DeepTest rake task, to be able to grab all the testcases you want.
In my case, I want to skip a whole folder containing selenium tests, so I have to write my Deep Test rake file this way:
(in <em>/lib/tasks/test.rake</em>)
<pre style="background:#f1f0f0 none repeat scroll 0 0;color:#000000;padding-left:30px;"><span style="color:#800000;font-weight:bold;">require</span> <span style="color:#e60000;">"deep_test/rake_tasks"</span>
<span style="color:#806030;">.</span><span style="color:#806030;">.</span><span style="color:#806030;">.</span>

DeepTest::TestTask<span style="color:#806030;">.</span><span style="color:#400000;font-weight:bold;">new</span> <span style="color:#e60000;">"deep"</span> <span style="color:#400000;font-weight:bold;">do</span> |t|
t<span style="color:#806030;">.</span>number_of_workers <span style="color:#806030;">=</span> <span style="color:#c00000;">2</span>
t<span style="color:#806030;">.</span>pattern <span style="color:#806030;">=</span> <span style="color:#e60000;">"test/{unit,functional,integration}/**/*_test.rb"</span>
t<span style="color:#806030;">.</span>libs &lt;&lt; <span style="color:#e60000;">"test"</span>
t<span style="color:#806030;">.</span>worker_listener <span style="color:#806030;">=</span> <span style="color:#e60000;">"DeepTest::Database::MysqlSetupListener"</span>
<span style="color:#400000;font-weight:bold;">end</span>
</pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/11/10/thinkcode-tv-goes-live/">ThinkCode.TV Goes Live!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-10T00:00:00+01:00" pubdate data-updated="true">Nov 10<span>th</span>, 2009</time>
        
         | <a href="/blog/2009/11/10/thinkcode-tv-goes-live/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">An advertisement for my friend and mentor Piergiuliano Bossi: his long-waited <a href="http://it.thinkcode.tv/">ThinkCode.TV</a> goes live!

<strong>ThinkCode.TV </strong>is a website specializes in the delivery of high quality commercial screencasts about software development, at a really cheap prices.

The first 5 videos are now online (the actual language is italian, but english content is planned for the following months):
<ul>
	<li>The first two lessions on <strong>Python</strong>, by Marco Beri</li>
	<li>A screencast on <strong>MacRuby</strong>, by Renzo Borgatti</li>
	<li>The first two lessions on <strong>TDD</strong>, by Piergiuliano Bossi.</li>
</ul>
Selling all these high-quality screencasts at about <strong>5 euro each </strong>makes them *really* appetible.
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/11/04/think-different-about-mock-objects/">Think Different About Mock Objects!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-04T00:00:00+01:00" pubdate data-updated="true">Nov 4<span>th</span>, 2009</time>
        
         | <a href="/blog/2009/11/04/think-different-about-mock-objects/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div>Recently, after the post on mock objects by Uncle Bob (<a href="http://blog.objectmentor.com/articles/2009/10/28/manual-mocking-resisting-the-invasion-of-dots-and-parentheses" target="_blank">&#8220;Manual Mocking: Resisting the Invasion of Dots and Parentheses&#8221;</a>), a rather long discussion thread grown in the extreme programming italian newsgroup (starting <a href="http://it.groups.yahoo.com/group/extremeprogramming-it/message/7224" target="_blank">here</a>, but careful, it&#8217;s in italian, sorry!).</div>
<div>This led me to think more deeply about my experience with mock objects, and I&#8217;d like to share my point of view here, as it&#8217;s quite different (or so it seems to me) from the common opinions on this important topic.</div>
<p>
<div>I&#8217;ve always followed the so-called (as Giuliano would say, isn&#8217;t it <a href="http://thinkingbox.wordpress.com/" target="_blank">Giuliano</a>? :-) &#8220;English School&#8221; of mock objects, the one coming from the pioneering works of <a href="http://www.planningcards.com/iterex/blog.html" target="_blank">Tim Mackinnon</a>,<a href="http://www.m3p.co.uk/blog/" target="_blank"> Steve Freeman</a> and <a href="http://www.natpryce.com/" target="_blank">Nat Pryce</a>, the real fathers of mock objects.</div>
<p>
<div>And I&#8217;ve always carefully followed their advice, first through their *epic* paper  <strong>&#8220;Mock Roles, not Objects&#8221;</strong> (<a href="http://www.jmock.org/oopsla2004.pdf" target="_blank">http://www.jmock.org/oopsla2004.pdf</a>) - IMHO the best paper on mock objects and on object oriented programming with mocks - then through their terrific posts on the blog <a href="http://www.mockobjects.com/" target="_blank">www.mockobjects.com</a>, and finally, through their first (and brand new) book, <a href="http://www.amazon.com/Growing-Object-Oriented-Software-Guided-Tests/dp/0321503627" target="_blank">&#8220;Growing Object-Oriented Software, Guided by Tests&#8221;</a>.</div>
<p>
<div>One thing I learn is that <strong>mock objects are a design tool</strong>, while many people see it only as a technique for speeding up unit tests.</div>
<div>And in this context mock objects are a key tool to support your TDD process, especially in test-driving your domain model, where you follow a process similar to traditional top-down development, in which you start from the highest level of abstraction and then proceed, layer by layer, to reach the core of the domain and then move again towards the boundary of the system, towards the &#8220;services&#8221; (you can find many similarities in <a href="http://alistair.cockburn.us/Hexagonal+architecture" target="_blank">Cockburn&#8217;s approach to Hexagonal Architecture</a>).</div>
<p>
<div>Then, when you reach the domain boundary, you should stop using mocks.</div>
<div>Mock objects are useful to TDDing the thin adapter layers to your services (that is, third-party libraries or external components (e.g. a database, a JMS queue, &#8230;). But then, the actual adapters will be tested with integration testing.</div>
<p>
<div>Why?</div>
<p style="padding-left:30px;">Because you should use mock objects as far as you can apply TDD, whereas you can design and *discover* interfaces (and roles), and assign responsibility. On the other hand, in front of a third-party library you cannot follow this process, since the code is not under your control, and you cannot modify it.</p>
<p>
<div style="padding-left:30px;">Because if you use mock objects with third-party libraries (two concrete examples taken from our recent projects: isolating our tests from the database in a Rails app, or in a java app using Hibernate ORM), you&#8217;ll write tests that *guess* the library behaviour, and your guesses may be far away from the actual behaviour.</div>
<div style="padding-left:30px;">Raise your hands if you never burnt your fingers with this kind of test with mocks, where maybe you *thought* you had a save() method to return an A object while in fact it returned B object! :)</div>
<p>
<div style="padding-left:30px;">And finally, because this kind of tests with mocks end up to be long, unreadable and fragile (an &#8220;invasion of dots and parentheses&#8221; reported by Uncle Bob in his post), full of mocks and mock expectations. And, hey, you cannot refactor them, since you don&#8217;t own the third-party code!</div>
<BR>
To verify the correct integration with libraries or external components, which are out of you domain, as well as with integration tests, you may use <a href="http://xunitpatterns.com/Fake%20Object.html" target="_blank">fake</a>s or <a href="http://xunitpatterns.com/Test%20Stub.html" target="_blank">stub</a>s (and, by the way, the example in the Uncle Bob&#8217;s post is actually a stub, not a &#8220;hand-rolled mock&#8221;).
<p>
<div>So, I&#8217;ll repeat myself, following this &#8220;mocks as a design tool&#8221; approach, you&#8217;ll <a href="http://www.mockobjects.com/2007/04/test-smell-everything-is-mocked.html" target="_blank">mock only types you own</a>.</div>
<p>
<div>Some useful references to study this topic in depth (you&#8217;ll be OK even if you read just the first 2-3 links :-)</div>
<div>
<ul>
	<li><a href="http://www.jmock.org/oopsla2004.pdf" target="_blank">http://www.jmock.org/oopsla2004.pdf</a> (I&#8217;m quoting again this paper, because it&#8217;s a *really* good starting point to understand this approch to mock objects)</li>
	<li><a href="http://www.mockobjects.com/2007/04/test-smell-everything-is-mocked.html" target="_blank">http://www.mockobjects.com/2007/04/test-smell-everything-is-mocked.html</a> (if you like to deepen the &#8220;Don&#8217;t mock third-party libraries&#8221; and &#8220;Don&#8217;t mock value objects&#8221; topics)</li>
	<li><a href="http://www.mockobjects.com/2006/10/tell-dont-ask-and-mock-objects.html" target="_blank">http://www.mockobjects.com/2006/10/tell-dont-ask-and-mock-objects.html</a></li>
	<li><a href="http://www.mockobjects.com/2006/10/jmock-listening-to-opinionated.html" target="_blank">http://www.mockobjects.com/2006/10/jmock-listening-to-opinionated.html</a></li>
	<li><a href="http://www.mockobjects.com/2006/09/like-fire-drill.html" target="_blank">http://www.mockobjects.com/2006/09/like-fire-drill.html</a></li>
	<li><a href="http://www.mockobjects.com/2007/04/test-smell-bloated-constructor.html" target="_blank">http://www.mockobjects.com/2007/04/test-smell-bloated-constructor.html</a></li>
	<li><a href="http://www.mockobjects.com/2007/04/test-smell-i-need-to-mock-object-i-cant.html" target="_blank">http://www.mockobjects.com/2007/04/test-smell-i-need-to-mock-object-i-cant.html</a></li>
	<li><a href="http://www.mockobjects.com/files/evolving_an_edsl.ooplsa2006.pdf" target="_blank">http://www.mockobjects.com/files/evolving_an_edsl.ooplsa2006.pdf</a> (yet another paper, very good)</li>
	<li> and if you want to know more about the history of mock objects: <a href="http://www.mockobjects.com/2009/09/brief-history-of-mock-objects.html" target="_blank">http://www.mockobjects.com/2009/09/brief-history-of-mock-objects.html</a></li>
</ul>
I hope I give you some useful feedback on this topic!

</div>
<div>And, by the way, feedbacks are warmly welcome!</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/10/02/ruby-how-to-spot-slow-tests-in-your-test-suite/">Ruby: How to Spot Slow Tests in Your Test Suite</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-02T00:00:00+02:00" pubdate data-updated="true">Oct 2<span>nd</span>, 2009</time>
        
         | <a href="/blog/2009/10/02/ruby-how-to-spot-slow-tests-in-your-test-suite/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">This is actually my first post in english and also my first post on Ruby/Rails stuff. Twice as hard!

Anyway, we&#8217;re working on a Rails project, and we&#8217;re experiencing the classical debate in all Rails project (at least the ones with tests!): why our test suite is so damn slow?!
Ok, we know that ActiveRecord is one of the key components in Rails and is at the root of its philosophy of web development. And along with ActiveRecord comes the strong tight between the model and the database. So each test, even the unit tests, will touch the database (ok, technically speaking they cannot be defined unit-tests, I know. Sorry Michael Feathers for <a title="What is a unit test" href="http://www.artima.com/weblogs/viewpost.jsp?thread=126923">betraying your definition</a>).
The very first consequence of this approach is that as your test suite grows with your project, it will become slower and slower.

Let&#8217;s take our current project. This is our actual test suite composition:
<ul>
	<li> Unit: 317 tests, 803 assertions</li>
	<li> Functional: 245 tests, 686 assertions</li>
	<li> Integration: 50 tests, 218 assertions</li>
</ul>
So we have<strong> 612 test methods</strong>, for a resulting number of <strong>1707 assertions</strong>.
As a side note, our code-to-test ratio is 1:2.3, that is, for each line of production code we have 2.3 lines of tests.
The suite takes about <strong>115 seconds to execute</strong> (on my MacBook Pro Core 2 Duo).

So, what can we do to speed up our tests and have a more &#8220;feedback-friendly&#8221; test suite?
The first step toward the solution of this issue is to have some metrics to reflect on, and so I developed this little ruby module to collect test duration times.
This is how you can use it too:

First, create a file called <strong>&#8220;test_time_tracking.rb&#8221;</strong> in the test folder of your Rails project. This should be its content:
<pre style='color:#000020;background:#f6f8ff;'><span style='color:#200080;font-weight:bold;'>module</span> TestTimeTracking
    <span style='color:#200080;font-weight:bold;'>class</span> ActiveSupport::TestCase
      <span style='color:#200080;font-weight:bold;'>def</span> self<span style='color:#308080;'>.</span>should_track_timing?
        <span style='color:#200080;font-weight:bold;'>not</span><span style='color:#308080;'>(</span>ENV<span style='color:#308080;'>[</span><span style='color:#1060b6;'>"tracking"</span><span style='color:#308080;'>]</span><span style='color:#308080;'>.</span><span style='color:#200080;font-weight:bold;'>nil</span>?<span style='color:#308080;'>)</span>
      <span style='color:#200080;font-weight:bold;'>end</span>

      setup :mark_test_start_time <span style='color:#200080;font-weight:bold;'>if</span> should_track_timing?
      teardown :record_test_duration <span style='color:#200080;font-weight:bold;'>if</span> should_track_timing?

      <span style='color:#200080;font-weight:bold;'>def</span> mark_test_start_time
        @start_time <span style='color:#308080;'>=</span> Time<span style='color:#308080;'>.</span>now
      <span style='color:#200080;font-weight:bold;'>end</span>

      <span style='color:#200080;font-weight:bold;'>def</span> record_test_duration
        File<span style='color:#308080;'>.</span><span style='color:#400000;'>open</span><span style='color:#308080;'>(</span><span style='color:#1060b6;'>"/tmp/test_metrics.csv"</span>, <span style='color:#1060b6;'>"a"</span><span style='color:#308080;'>)</span> <span style='color:#200080;font-weight:bold;'>do</span> |file|
          file<span style='color:#308080;'>.</span><span style='color:#400000;'>puts</span> <span style='color:#1060b6;'>"#{name().gsub(/,/, '_')},#{Time.now - @start_time}"</span>
        <span style='color:#200080;font-weight:bold;'>end</span>
      <span style='color:#200080;font-weight:bold;'>end</span>

    <span style='color:#200080;font-weight:bold;'>end</span>
<span style='color:#200080;font-weight:bold;'>end</span>
</pre>
Then, edit your <strong>&#8220;test_helper.rb&#8221;</strong> (again, under the test folder), to require and include the previous module.
E.g.

*test_helper.rb*
<pre style='color:#000020;background:#f6f8ff;'>ENV<span style='color:#308080;'>[</span><span style='color:#1060b6;'>"RAILS_ENV"</span><span style='color:#308080;'>]</span> <span style='color:#308080;'>=</span> <span style='color:#1060b6;'>"test"</span>
  <span style='color:#400000;'>require</span> File<span style='color:#308080;'>.</span>expand_path<span style='color:#308080;'>(</span>File<span style='color:#308080;'>.</span>dirname<span style='color:#308080;'>(</span>__FILE__<span style='color:#308080;'>)</span> <span style='color:#308080;'>+</span> <span style='color:#1060b6;'>"/../config/environment"</span><span style='color:#308080;'>)</span>
  <span style='color:#400000;'>require</span> <span style='color:#1060b6;'>"test_time_tracking"</span>

  <span style='color:#200080;font-weight:bold;'>class</span> ActiveSupport::TestCase
    include TestTimeTracking
    <span style='color:#308080;'>.</span><span style='color:#308080;'>.</span><span style='color:#308080;'>.</span>
</pre>
then, all you have to do is executing your rake task with the &#8220;tracking&#8221; option set, e.g.
<code>tracking=on rake</code>

At the end of the test suite execution you&#8217;ll find a CSV file (test_metrics.csv) in your /tmp folder.
This file contains a line for each test method executed, along with its duration in seconds.
I use to upload this file in google docs, and then apply a formula to sort out the methods from the slowest to the fastest.
A good formula is the following:
<code>=Sort(A2:B612, B2:B612, FALSE)</code>

The main limitation in the current implementation of this module is that every time the suite is executed with rake, the new time metrics collected are appended at the end of the previous file (if it exists), so each time you should remember to move the file to a different location. I&#8217;m working on this issue, so I&#8217;m expecting to find a better solution. Stay tuned!
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/07/08/come-fare-integration-test-su-un-plugin-per-jira-3-13-4/">Come Fare Integration Test Su Un Plugin Per Jira 3.13.4</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-08T00:00:00+02:00" pubdate data-updated="true">Jul 8<span>th</span>, 2009</time>
        
         | <a href="/blog/2009/07/08/come-fare-integration-test-su-un-plugin-per-jira-3-13-4/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">Quando si tratta di voler scrivere test di integrazione per il vostro meraviglioso plugin per Jira 3.13.4 (l&#8217;ultima versione di Jira, in attesa che la 4.0 esca dalla beta), ci si imbatte in una serie di problemi.
Dopo qualche indagine, sono riuscito a risolverli tutti, e mi accingo a condividere la soluzione adottata, nella speranza che possa servire a qualcun altro (anche a me stesso tra qualche mese&#8230;).

Premetto che stiamo sviluppato il plugin usando maven2, che per questo genere di cose è davvero molto comodo.
Se avete qualche dubbio, ecco due riferimenti:
<ul>
	<li><a title="How to Build an Atlassian Plugin" href="http://confluence.atlassian.com/display/DEVNET/How+to+Build+an+Atlassian+Plugin">http://confluence.atlassian.com/display/DEVNET/How+to+Build+an+Atlassian+Plugin</a></li>
	<li><a title="Testing your plugin" href="//confluence.atlassian.com/display/DEVNET/Testing+your+plugin">http://confluence.atlassian.com/display/DEVNET/Testing+your+plugin</a></li>
</ul>
Il pom.xml generato da maven usando l&#8217;archetipo per plugin di Jira contiene una sezione &#8220;properties&#8221; che, all&#8217;inizio, si presenta così:
<span style="font-family:Consolas, Monaco, 'Courier New', Courier, monospace;line-height:18px;font-size:12px;white-space:pre;">&lt;properties&gt;
&lt;atlassian.plugin.key&gt;
com.sourcesense.jira.plugin.MyWonderfulPluginToSaveTheWorld
&lt;/atlassian.plugin.key&gt;</span>

<span style="font-family:Consolas, Monaco, 'Courier New', Courier, monospace;line-height:18px;font-size:12px;white-space:pre;"> &lt;!&#8211; JIRA version &#8211;&gt;</span>

<span style="font-family:Consolas, Monaco, 'Courier New', Courier, monospace;line-height:18px;font-size:12px;white-space:pre;"> &lt;atlassian.product.version&gt;3.13&lt;/atlassian.product.version&gt;</span>

<span style="font-family:Consolas, Monaco, 'Courier New', Courier, monospace;line-height:18px;font-size:12px;white-space:pre;"> &lt;!&#8211; JIRA functional test library version &#8211;&gt;</span>

<span style="font-family:Consolas, Monaco, 'Courier New', Courier, monospace;line-height:18px;font-size:12px;white-space:pre;"> &lt;atlassian.product.test-lib.version&gt;3.13&lt;/atlassian.product.test-lib.version&gt;</span>

<span style="font-family:Consolas, Monaco, 'Courier New', Courier, monospace;line-height:18px;font-size:12px;white-space:pre;"> &lt;!&#8211; JIRA data version &#8211;&gt;</span>

<span style="font-family:Consolas, Monaco, 'Courier New', Courier, monospace;line-height:18px;font-size:12px;white-space:pre;"> &lt;atlassian.product.data.version&gt;3.13&lt;/atlassian.product.data.version&gt;</span>

<span style="font-family:Consolas, Monaco, 'Courier New', Courier, monospace;line-height:18px;font-size:12px;white-space:pre;">&lt;/properties&gt;</span>

Qui trovate una <a href="http://confluence.atlassian.com/display/DEVNET/Testing+your+plugin#Testingyourplugin-SystemProperties">descrizione di queste properties</a>, assieme ai loro valori di default.

Ecco un estratto:
<p style="padding-left:20px;"><em><strong>&#8220;atlassian.product.version&#8221; </strong>- version of the Atlassian product to compile and test against.</em></p>
<p style="padding-left:20px;"><em><strong>&#8220;atlassian.product.data.version&#8221;</strong> - version of the test resource bundle that contains the basic Atlassian product configuration data for the integration test environment. These versions mimic the actual Atlassian product versions. However we might only modify and release the relevant projects for the reasons of non-backwards compatibility of the new versions of Atlassian products. Therefore not every version of Atlassian products will have a corresponding version of the resource bundle.</em></p>
La property <strong>&#8220;atlassian.product.test-lib.version&#8221;</strong> non è documentata, e per capire il suo significato dovete chiedere a Google, che vi rispondera&#8217; con <a href="http://www.customware.net/repository/display/ATLASSIAN/Integration+Testing+of+Confluence+Plugins">questa utile pagina</a>.
<p style="padding-left:20px;"><em><strong>&#8220;atlassian.product.test-lib.version&#8221;</strong> - The version of the testing library to use, as a general recommendation you should at least use version 2.0 or higher as it exposes more of the page&#8217;s content and provides quite a few extra helper classes to aid in your testing.</em></p>
Benissimo, quindi io che sto facendo un plugin per la versione 3.13.4 di Jira, sostituisco questo valore nelle tre properties del POM
<pre style="padding-left:20px;">&lt;properties&gt;
 ...
    &lt;atlassian.product.version&gt;3.13.4&lt;/atlassian.product.version&gt;
    &lt;atlassian.product.test-lib.version&gt;3.13.4&lt;/atlassian.product.test-lib.version&gt;
    &lt;atlassian.product.data.version&gt;3.13.4&lt;/atlassian.product.data.version&gt;
 &lt;/properties&gt;</pre>
Detto, fatto.
Mi manca solo di creare il mio primo test di integrazione, rigorosamente nel package che inizia con &#8220;it&#8221;.
<pre> package it.com.sourcesense.jira.plugin;

 import com.atlassian.jira.webtests.JIRAWebTest;

 public class JiraTest extends JIRAWebTest {

    public JiraTest(String name) {
      super(name);
    }

    public void setUp() {
      super.setUp();
      restoreDataWithLicense("JiraDataForTest.xml", ENTERPRISE_KEY);
   }

   public void testVerySimple() throws Exception {
      assertTextPresent("This JIRA site is for demonstration purposes only");
   }
 }</pre>
E copiare il dump esportato da Jira per avere qualche dato di test (JiraDataForTest.xml) nel folder src/test/xml/ del progetto del plugin.

A questo punto non mi resta che lanciare il seguente comando nella home della progetto
<pre style="padding-left:20px;">mvn integration-test</pre>
e aspettare con pazienza che maven scarichi quel Terabyte di jar di cui dichiara di aver bisogno.

Primo problema: la console di mvn mi dice
<pre> [INFO] [jar:jar]
 [INFO] Building jar:
        /private/tmp/HelloWorldPlugin/target/MyWonderfulPluginToSaveTheWorld-1.0-SNAPSHOT.jar
 [INFO] [antrun:run {execution: generate-integration-test-config}]
 [INFO] Executing tasks
 [touch] Creating
  /private/tmp/MyWonderfulPluginToSaveTheWorld/target/test-classes/localtest.properties
 [propertyfile] Updating property file:
  /private/tmp/MyWonderfulPluginToSaveTheWorld/target/test-classes/localtest.properties
 [INFO] Executed tasks
 [INFO] [antrun:run {execution: pre-integration-test-user-ant-tasks}]
 [INFO] Executing tasks
 [INFO] Executed tasks
 [INFO] [atlassian-test-harness:start-fisheye {execution: start-fisheye}]
 [INFO] Skipping fisheye; startService is set to false
 [INFO] [atlassian-test-harness:start-confluence {execution: start-confluence}]
 [INFO] Skipping confluence; startService is set to false
 [INFO] [atlassian-test-harness:start-jira {execution: start-jira}]
 [INFO] Output log is set to /private/tmp/MyWonderfulPluginToSaveTheWorld/target/jira/output.log</pre>
E si blocca lì.
Vado a vedere il log segnalato nell&#8217;ultima riga della console, e scopro una pletora di eccezioni:
<pre>2009-07-07 16:11:19,568 main ERROR
[com.atlassian.license.LicenseManager] Exception getting license: java.lang.RuntimeException: contactLicense was null
 at org.picocontainer.defaults.DecoratingComponentAdapter.getComponentInstance(DecoratingComponentAdapter.java:42)
 at org.picocontainer.defaults.SynchronizedComponentAdapter.getComponentInstance(SynchronizedComponentAdapter.java:35)
 ...</pre>
Indago, guardo su Google, niente.
Provo allora a sostituire 3.13.4 con 3.13.2 nelle tre properties del POM
<pre style="padding-left:20px;">&lt;properties&gt;
    ...
   &lt;atlassian.product.version&gt;3.13.2&lt;/atlassian.product.version&gt;
   &lt;atlassian.product.test-lib.version&gt;3.13.2&lt;/atlassian.product.test-lib.version&gt;
   &lt;atlassian.product.data.version&gt;3.13.2&lt;/atlassian.product.data.version&gt;
&lt;/properties&gt;</pre>
E rilancio &#8220;mvn integration-test&#8221;.
Stavolta l&#8217;errore è più chiaro: fallisce il ripristino del dump JiraDataForTest.xml nell&#8217;istanza di Jira 3.13.2 che viene avviata da maven, perchè la versione del dump è stata fatta con la 3.13.4, una versione successiva alla 3.13.2, e quindi Jira si rifiuta da caricarla. Eccheccavolo.

Vi risparmio tutte le combinazioni di numeri di versione che ho provato a mettere nel POM, senza successo, e vado dritto verso la soluzione.
Ecco il pom.xml che funziona
<pre style="padding-left:20px;">&lt;properties&gt;
 ...
 &lt;atlassian.product.version&gt;3.13.2&lt;/atlassian.product.version&gt;
 &lt;atlassian.product.test-lib.version&gt;3.13.4&lt;/atlassian.product.test-lib.version&gt;
 &lt;atlassian.product.data.version&gt;3.13.2&lt;/atlassian.product.data.version&gt;
 &lt;/properties&gt;</pre>
L&#8217;altra cosa da fare è modificare i dump di Jira che vorrete usare per i vostri test, in modo da far credere a Jira che sta importando una versione compatibile del dump.
Per fare questo dovete:

1. Aprire il dump xml di Jira che usate per i test (nel nostro caso JiraDataForTest.xml)

2. Cercare l&#8217;occorrenza di questa property
<pre style="padding-left:20px;">&lt;OSPropertyEntry id="12345"
   entityName="jira.properties"
   entityId="1"
   propertyKey="jira.version.patched"
   type="5"/&gt;</pre>
<p style="padding-left:20px;">Per essere sicuri basta che cerchiate la parola &#8220;jira.version.patched&#8221;</p>
3. Prendere nota dell&#8217;id di questa propery (es 12345) e cercare l&#8217;occorrenza di una OSPropertyString con lo stesso id
<pre style="padding-left:20px;">&lt;OSPropertyString id="12345" value="354"/&gt;</pre>
<p style="padding-left:20px;">Ecco, quel valore (354) rappresenta la build version di Jira, che per la 3.13.4 è proprio 354.</p>
4. Sostituire il valore 354 con 335, che è la build versione di Jira 3.13.2 e salvare l&#8217;xml

5. Rilanciare il test.

Tutto dovrebbe filare liscio ora&#8230;
<pre> $ mvn integration-test
 ...
 ...
 [INFO] [jar:jar]
 [INFO] Building jar:
    /Users/pietrodibello/Documents/workspace/MyWonderfulProjectToSaveTheWorld/MyWonderfulPluginToSaveTheWorld/
    target/MyWonderfulPluginToSaveTheWorld-1.0-SNAPSHOT.jar
 [INFO] [antrun:run {execution: generate-integration-test-config}]
 [INFO] Executing tasks
 [propertyfile] Updating property file:
   /Users/pietrodibello/Documents/workspace/MyWonderfulProjectToSaveTheWorld/MyWonderfulPluginToSaveTheWorld/
   target/test-classes/localtest.properties
 [INFO] Executed tasks
 [INFO] [antrun:run {execution: pre-integration-test-user-ant-tasks}]
 [INFO] Executing tasks
 [INFO] Executed tasks
 [INFO] [atlassian-test-harness:start-fisheye {execution: start-fisheye}]
 [INFO] Skipping fisheye; startService is set to false
 [INFO] [atlassian-test-harness:start-confluence {execution: start-confluence}]
 [INFO] Skipping confluence; startService is set to false
 [INFO] [atlassian-test-harness:start-jira {execution: start-jira}]
 [INFO] Output log is set to
   /Users/pietrodibello/Documents/workspace/MyWonderfulProjectToSaveTheWorld/MyWonderfulPluginToSaveTheWorld/target/jira/output.log
 [INFO] Finished with jira goal
 [INFO] [atlassian-test-harness:start-bamboo {execution: start-bamboo}]
 [INFO] Skipping bamboo; startService is set to false
 [INFO] [surefire:test {execution: acceptance_tests}]
 [INFO] Surefire report directory:
   /Users/pietrodibello/Documents/workspace/MyWonderfulProjectToSaveTheWorld/MyWonderfulPluginToSaveTheWorld/target/surefire-reports

 -------------------------------------------------------
 T E S T S
 -------------------------------------------------------
 Running it.com.sourcesense.jira.plugin.JiraTest
 .
 . Started it.com.sourcesense.jira.plugin.JiraTest.test. Wed Jul 08 14:30:44 CEST 2009
 going to page secure/admin/XmlRestore!default.jspa
 Asserting text present: Your project has been successfully imported
 Asserting text present: This JIRA site is for demonstration purposes only
 .
 . Finished it.com.sourcesense.jira.plugin.JiraTest.test. Wed Jul 08 14:30:54 CEST 2009
 . The test ran in 10.542 seconds
 . The test suite has been running for 10.536 seconds
 . Max Mem : 66650112 Total Mem : 2727936 Free Mem : 268968
 . ______________________________
 Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 11.045 sec

 Results :

 Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

 [INFO] ------------------------------------------------------------------------
 [INFO] BUILD SUCCESSFUL
 [INFO] ------------------------------------------------------------------------
 [INFO] Total time: 44 seconds
 [INFO] Finished at: Wed Jul 08 14:30:55 CEST 2009
 [INFO] Final Memory: 32M/254M
 [INFO] ------------------------------------------------------------------------</pre>
Evviva, barra verde!!
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/07/06/come-generare-il-report-html-dei-test-eseguiti-con-jmeter/">Come Generare Il Report HTML Dei Test Eseguiti Con Jmeter</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-06T00:00:00+02:00" pubdate data-updated="true">Jul 6<span>th</span>, 2009</time>
        
         | <a href="/blog/2009/07/06/come-generare-il-report-html-dei-test-eseguiti-con-jmeter/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><strong>Problema</strong>: <em>&#8220;Ho problemi con il report html dei test jmeter generato dalla trasformazione XSL indicata dalla documentazione di Jmeter (versione 2.3.4). Infatti nel report html si hanno due comportamenti anomali:</em>
<ul>
	<li><em>la prima riga è sempre raddoppiata, ovvero presente due volte (e vabbè, passi)</em></li>
	<li><em>le colonne che indicano i tempi massimi e minimi non sono valorizzate (NaN)&#8221;</em></li>
</ul>
<strong>Soluzione</strong>: <em>&#8220;Il problema è nella versione di Xalan inclusa di default nel JRE 1.5 e 1.6 di java. Si deve usare Xalan-J 2.4.1&#8221;</em>

<strong>Descrizione più dettagliata</strong>:

Tutto è nato con dei test di carico e performance che stiamo eseguendo in questo periodo.
Jmeter, di cui usiamo la versione 2.3.4, esporta il report del test plan in formato XML (o CSV se specificato). Per convertirlo in un HTML più comodamente fruibile si deve effettuare una trasformazione XSL, e per fortuna Jmeter mette a disposizione degli stylesheet apposta per questo (si trovano nel folder /extras dell&#8217;installazione di Jmeter).

Detto, fatto. Il comando che eseguo dovrebbe essere (ad esempio)
<pre style="padding-left:30px;">java org.apache.xalan.xslt.Process
  -IN jmeterResults.xml
  -XSL ~/work/jakarta-jmeter-2.3.4/extras/jmeter-results-report_21.xsl
  -OUT jmeterResults.html</pre>

Purtroppo questa trasformazione non funziona, o meglio, produce un HTML incompleto (vedi sezione &#8220;Problema&#8221;).

Dopo diversi tentativi, ho scoperto la soluzione, grazie ad un commento a <a href="http://jlorenzen.blogspot.com/2008/03/automated-performance-tests-using.html">questo post</a>: usando la <a href="http://mirrors.ibiblio.org/pub/mirrors/maven2/xalan/xalan/2.4.1/">versione 2.4.1 di Xalan-J</a> l&#8217;HTML prodotto è completo.

Per la cronaca, per lanciare la trasformazione XSL a linea di comando specificando una propria versione di Xalan, basta fare così
<pre style="padding-left:30px;">java
<strong>  -cp xalan-2.4.1.jar</strong> org.apache.xalan.xslt.Process
  -IN log.jtl
  -XSL ../extras/jmeter-results-report_21.xsl
  -OUT foo.html</pre>
<span style="font-family:Georgia, 'Times New Roman', 'Bitstream Charter', Times, 0;font-size:small;"><span style="line-height:19px;white-space:normal;">
</span></span>
<span style="font-family:Georgia, 'Times New Roman', 'Bitstream Charter', Times, 0;line-height:19px;white-space:normal;font-size:13px;">E in ant (cosa che interessava me in particolare, perchè lanciavamo jmeter da ant)</span>
<pre style="padding-left:30px;">&lt;xslt
  in="${scenario.target.path}/scenario-result.xml"
  out="${scenario.target.path}/AggregateReport.html"
  style="${jmeter.home}/extras/jmeter-results-report_21.xsl"
<strong>  classpath="${basedir}/../xalan-2.4.1.jar"</strong> /&gt;</pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/03/23/sul-coaching/">Sul Coaching&#8230;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-23T00:00:00+01:00" pubdate data-updated="true">Mar 23<span>rd</span>, 2009</time>
        
         | <a href="/blog/2009/03/23/sul-coaching/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Caspita, ne è passato di tempo dal mio ultimo post, e tante cose sono cambiate nel frattempo!<br />
La cosa più importante che mi è capitata è che da oramai un anno ho felicemente cambiato lavoro, e grazie a <a href="http://www.sourcesense.com">Sourcesense</a> ho avuto la possibilità di continuare a lavorare in un team agile, dopo la passata esperienza nel team XPlayers di Quinary, iniziata nel 2002.<br />
E&#8217; giusto giusto passato un anno da quando lavoro nel <a href="http://www.sourcesense.com/en/agile/">team Orione di Sourcesense</a>, e, dopo diversi progetti di sviluppo e di mentoring, ho avuto l&#8217;occasione di fare il coach di una piccola parte del team.<br />
Quest&#8217;ultima esperienza mi ha portato anche a fare una riflessione più generale sul coaching di un team agile, riflessioni che vorrei cercare di esprimere in senso più o meno compiuto qui di seguito.</p>
<p><img class="aligncenter size-medium wp-image-45" title="teamwork!" src="http://xplayer.files.wordpress.com/2009/03/504295738_ce55fc543c4.jpg?w=300" alt="teamwork!" width="300" height="199" /></p>
<p>E&#8217; vero, verissimo, come spesso si dice e si sente dire, che ogni membro del team dovrebbe avere a cuore il processo e farsi carico di ricordare a tutti (per primo a sè stesso) le pratiche, i principi e i valori alla base del team stesso, soprattutto in condizioni di pressione o difficoltà. E&#8217; quindi ragionevole dire che il team agile *maturo* è un team &#8220;senza coach&#8221;.<br />
Eppure questa conclusione non mi soddisfa, e non mi convince del tutto.<br />
Io penso che qualunque team, dal più &#8220;green&#8221; al piu&#8217; navigato ed esperto, abbia bisogno comunque di un coach. Questo perchè ci sono alcuni &#8220;ruoli&#8221; che, sebbene possano essere interpretati da molti membri del team (da tutti i membri, in un team maturo), devono avere un interprete primario &#8220;designato&#8221; dal team.</p>
<p>Faccio un esempio: ognuno di noi sa che in caso di conflitti tra membri del team, o di atti di mancanza di rispetto, dovremmo tutti intervenire per riprendere la persona che ha &#8220;alzato i toni&#8221;, ma il coach, se presente, di certo interverrà per primo.<br />
Stessa cosa se un customer o qualunque persona &#8220;esterna&#8221; al team di sviluppo cerca di &#8220;forzare&#8221; il team a lavorare in modi che contrastano con i valori o i principi alla base del team. In tal caso ognuno di noi, indistintamente, dovrebbe intervenire. Ma non si puo&#8217; intervenire tutti, &#8220;in mucchio&#8221;. Ci vuole una persona che si faccia carico della cosa e che *per prima* protegga il team da interferenze e pressioni esterne, e per me quella persona è il coach.<br />
So che magari a molti risulterà una metafora un pò lontana, ma pensiamo alle squadre sportive (per esempio di calcio). Lì esiste la figura del capitano, che spesso e volentieri non è neanche la persona più brava della squadra (ad es nel Milan(*) il capitano è Pirlo, non Kaka&#8217; o Ronaldinhio), ma che certo interverrà per prima per riprendere un proprio giocatore se si comporta scorrettamente o se non segue gli schemi, o lo difenderà se è vittima di una decisione arbitrale giudicata ingiusta. Ancora, questo non vuol dire che gli altri giocatori non interverrano ugualmente in questi casi, ma di certo il capitano interverrà per primo e tutti i giocatori lo sanno, e quindi da questo punto di vista sono più &#8220;tranquilli&#8221;.</p>
<p>Per me questo è il ruolo primario e insostituibile del coach: è quello che c&#8217;è sempre e per primo. Se poi lui non può esserci, di certo gli altri faranno in modo che la sua assenza non si senta.</p>
<p>Tutto questo lungo e verboso discorso per dire che non penso basti chiedere che &#8220;ognuno di noi si prenda cura del processo&#8221;, anche se questo sforzo è condizione assolutamente necessaria al buon funzionamento del team.</p>
<p>P.S. Ricordo che nel team Xplayers in Quinary per un certo periodo il buon <a href="http://thinkingbox.wordpress.com/">Piergiuliano Bossi</a> (a cui devo moltissimo), come esercizio a margine degli studi teorici fatti sul libro bianco di XP di Beck, ci faceva, a turno, essere coach del team, per una iterazione. Questo ci serviva per capire che ruolo avesse davvero il coach.</p>
<p>(*) Nota: non sono milanista, è solo per fare un esempio.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/06/18/michael-feathers-on-tdd/">Michael Feathers on TDD</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-18T00:00:00+02:00" pubdate data-updated="true">Jun 18<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/06/18/michael-feathers-on-tdd/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">Una<a href="http://michaelfeathers.typepad.com/michael_feathers_blog/2008/06/the-flawed-theo.html"> breve riflessione di Michael Feathers sul TDD</a>, passando per i mock objects per finire sulla necessita&#8217; di adottare pratiche che &#8220;costringano&#8221; a ragionare e riflettere sul nostro codice.

Interessante anche l&#8217;excursus sulla storia dei mock objects, nati in Connextra
<blockquote>The story I heard was that it was all started by John Nolan, the CTO of a startup named Connextra. John Nolan, gave his developers a challenge: write OO code with no getters.  Whenever possible, tell another object to do something rather than ask.  In the process of doing this, they noticed that their code became supple and easy to change.</blockquote>
La frase chiave:
<blockquote>We need practices which help us achieve continuous discipline and a continuous state of reflection.  Clean Room and TDD are two practices which, despite their radical differences, force us to think with absolute precision about what we are doing.</blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/08/oracle-tip-monitorare-le-connessioni-aperte-verso-il-db/">[Oracle Tips] Monitorare Le Connessioni Aperte Verso Il Db</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-08T00:00:00+01:00" pubdate data-updated="true">Feb 8<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/02/08/oracle-tip-monitorare-le-connessioni-aperte-verso-il-db/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">Ogni volta che mi serve tenere d&#8217;occhio le connessioni verso un db Oracle mi ricordo vagamente della tabella <i>Vqualcosa</i>, ma il ricordo non e&#8217; mai abbastanza nitido&#8230; Pertanto mi segno qui alcune query utili, una volta per tutte!

Per contare le connessioni aperte verso il db raggruppate per macchina client
<blockquote><code>    select MACHINE, count(*) from V$SESSION group by MACHINE</code></blockquote>
Per contare solo quelle verso un certo schema
<blockquote><code>    select MACHINE, count(*) from V$SESSION where schemaname = '&lt;NOME DELLO SCHEMA&gt;' group by MACHINE</code></blockquote>
Per contare solo quelle provenienti da certi client
<code></code>
<blockquote><code>    select MACHINE, count(*) from V$SESSION where upper(machine) like '%&lt;NOME DELLA MACCHINA CLIENT&gt;%' group by MACHINE</code></blockquote>
Per contare le connessioni aperte verso il db raggruppate per utente
<code></code>
<blockquote><code>    select osuser, count(*) from V$SESSION group by osuser;</code></blockquote>
Per contare tutte le connessioni aperte (vabbe&#8217;, questa e&#8217; banale!)
<code></code>
<blockquote><code>    select count(*) from V$SESSION;</code></blockquote>
Per vedere anche lo stato della connessione
<code></code>
<blockquote><code>    select count(*), status from V$SESSION group by status;</code></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/08/michael-feathers-on-testing-private-methods/">Michael Feathers on Testing Private Methods</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-08T00:00:00+01:00" pubdate data-updated="true">Feb 8<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/02/08/michael-feathers-on-testing-private-methods/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">Da <a href="http://www.infoq.com/news/2008/01/private-methods-tdd-design">un articolo di InfoQ,</a> la posizione di M.Feathers sul testare i metodi privati:

Michael Feathers suggested last year in <a href="http://michaelfeathers.typepad.com/michael_feathers_blog/2007/09/the-deep-synerg.html">The Deep Synergy Between Testability and Good Design</a> that TDD encourages good design and, conversely, code that is not testable should make us think twice:
<blockquote><i>When I write tests and I have the urge to test a private method, I take it as a hint. The hint tells me that my class is encapsulating so much that it has ceased to be &#8220;understandable&#8221; by tests through its public interface. I listen to the hint, and factor my design differently. Usually, I end up moving the private method (and possibly some methods around it) to a new class where it can be non-private and accessible to tests.</i></blockquote>
Condivido al 100%!

E interessante anche quello che dice dopo, nel post originale, riguardo alla relazione tra coupling, cohesion e testabilita&#8217;.
<blockquote><i>In the end, it all comes down to cohesion and coupling.  If classes are deeply coupled with their neighbors, it is hard to control them in a test or observe them independently.  If a class isn&#8217;t cohesive, it may have some logic which is not easily exercisable through its public interface.</i>

<i>It seems that reverse is true also.  Classes which are hard to instantiate and use in a test harness are more coupled than they could be, and classes with private methods that you feel the urge to test, invariably have some sort of cohesion problem: they have more than one responsibility.</i></blockquote>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/18/introducing-tracco-the-trello-effort-tracker-gem/">Introducing Tracco: the Trello Effort Tracker gem</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/12/learning-ruby-reimplementing-it-attr_reader/">Learning Ruby reimplementing it: attr_reader</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/12/attr_writer/">Learning Ruby reimplementing it: attr_writer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/22/a-rails-project-file-for-sublime-text-2/">A Rails project file for Sublime Text 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/08/27/a-review-of-great-bash-video-by-carl-albing-oreilly-media/">A review of &#8220;Great Bash&#8221; video by Carl Albing (O&#8217;Reilly Media)</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/xpepper">@xpepper</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'xpepper',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("pierodibello", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/pierodibello" class="twitter-follow-button" data-show-count="false">Follow @pierodibello</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/pierodibello?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/pierodibello">My Delicious Bookmarks &raquo;</a></p>
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/107869079010805101249?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Pietro Di Bello -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'xplayer';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
